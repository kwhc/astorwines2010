/**
 * jQuery Social Buttons Plugin v0.1
 * https://github.com/michaek/jquery-socialButtons
 * 
 * Copyright (c) 2010 Bearded Studio LLC
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://jquery.org/license
 */(function(e,t){function s(e){var t=0;for(service_name in r)r[service_name][e]&&(t+=parseInt(r[service_name][e].count));return t}function o(e){return e>1e3&&(e=Math.round(e/1e3)+"K"),e}function u(e,t,n,r){window.open(n,r,"width="+e+",height="+t+",menubar=0,personalbar=0,toolbar=0,scrollbars=0,resizable=1")}var n={facebook:{display_name:"Facebook",data_url:'https://graph.facebook.com/fql?q=SELECT+url,total_count,normalized_url+FROM+link_stat+WHERE+url%3D"{{url}}"',share_url:"https://www.facebook.com/sharer/sharer.php?u={{url}}",count_key:"total_count",window_width:640,window_height:320},twitter:{display_name:"Twitter",data_url:"https://cdn.api.twitter.com/1/urls/count.json?url={{url}}",share_url:"https://twitter.com/intent/tweet?original_referer={{url}}&url={{url}}&text={{message}}",count_key:"count",window_width:550,window_height:450},pinterest:{display_name:"Pinterest",data_url:"https://api.pinterest.com/v1/urls/count.json?url={{url}}",share_url:"https://pinterest.com/pin/create/button/?url={{url}}&description={{message}}&media={{media_url}}",count_key:"count",window_width:630,window_height:270}},r={},i=[];e.each(n,function(e){r[e]={},i[i.length]=e}),e.fn.socialButtons=function(a){a=e.extend({url:window.location.href,label:"Share",message:"",services:i,forceRequest:!1,friendlyCounts:!0,friendlyTotal:!0},a),this.each(function(){var i=e(this).addClass("social-buttons"),f=e('<span class="share">'+a.label+"</span>").appendTo(i),l=e('<span class="services" />').appendTo(i),c=e('<span class="count total" />').append('<span class="label">Total</span>').append('<span class="value" />').appendTo(i),h=c.find(".value");e.each(a.services,function(i,f){if(n[f]){var p=n[f],d=e('<a class="count" />').addClass(f).attr("href",p.share_url.replace(/{{url}}/g,encodeURIComponent(a.url)).replace(/{{message}}/g,encodeURIComponent(a.message)).replace(/{{media_url}}/g,encodeURIComponent(a.media_url))).append('<span class="label">'+p.display_name+"</span>").append('<span class="value" />').appendTo(l);d.click(function(){return u(p.window_width,p.window_height,d.attr("href"),f),!1});var v=d.find(".value");if(r[f][a.url]==t||a.forceRequest)e.ajax(p.data_url.replace(/{{url}}/g,encodeURIComponent(a.url)),{dataType:"jsonp",success:function(e){e[p.count_key]==t&&e.data&&e.data.length&&(e=e.data[0]);var n=e[p.count_key];e["normalized_url"]=="www."&&(n=0),r[f][a.url]={count:n,raw:e},d.attr("title",n),a.friendlyCounts?v.html(o(n)):v.html(n);var i=s(a.url);c.attr("title",i),a.friendlyTotal?h.html(o(i)):h.html(i)},failure:function(){console.log("Failed",f)}});else{var m=r[f][a.url].count;d.attr("title",m),a.friendlyCounts?v.html(o(m)):v.html(m);var g=s(a.url);c.attr("title",g),a.friendlyTotal?h.html(o(g)):h.html(g)}}})})}})(jQuery);